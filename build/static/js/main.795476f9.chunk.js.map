{"version":3,"sources":["components/Home.js","components/Blog.js","components/Notification.js","components/LoginForm.js","components/BlogForm.js","components/RegisterForm.js","components/Togglabe.js","services/blogs.js","services/login.js","services/register.js","App.js","index.js"],"names":["Home","user","blogs","showAll","setShowAll","Blog","blogForm","updateBlog","delBlog","logOut","to","name","onClick","map","blog","i","useState","visible","setVisible","showDetails","display","hideDetails","like","id","style","paddingTop","paddingLeft","border","borderWidth","marginBottom","className","title","likes","author","content","Notification","message","LoginForm","username","password","handleUsernameChange","handlePasswordChange","handleLogin","history","useHistory","onSubmit","value","onChange","type","push","BlogForm","createBlog","newTitle","setNewTitle","newAuthor","setNewAuthor","newContent","setNewContent","event","preventDefault","target","RegisterForm","handleNameChange","handleRegister","Togglable","React","forwardRef","props","ref","hideWhenVisible","showWhenVisible","toggleVisibility","useImperativeHandle","buttonLabel","children","displayName","baseUrl","token","getAll","a","axios","get","response","data","getOne","newObject","config","headers","Authorization","post","update","request","put","setToken","newToken","deleteBlog","delete","login","credentials","register","App","setBlogs","setUser","errorMessage","setErrorMessage","setName","setUsername","setPassword","blogFormRef","useRef","useEffect","blogService","then","initialBlogs","loggedUserJSON","window","localStorage","getItem","JSON","parse","loginService","setItem","stringify","setTimeout","registerService","addBlog","blogObject","current","returnedBlog","concat","find","toUpdate","updateo","filter","path","removeItem","ReactDOM","render","document","getElementById"],"mappings":"wQAqDeA,EAlDF,SAAC,GAUP,IATLC,EASI,EATJA,KACAC,EAQI,EARJA,MACAC,EAOI,EAPJA,QACAC,EAMI,EANJA,WACAC,EAKI,EALJA,KACAC,EAII,EAJJA,SACAC,EAGI,EAHJA,WACAC,EAEI,EAFJA,QACAC,EACI,EADJA,OAGA,OACE,gCACY,OAATR,EACC,gCACE,0CACA,iCAAQ,cAAC,IAAD,CAAMS,GAAG,SAAT,qBACR,iCAAQ,cAAC,IAAD,CAAMA,GAAG,YAAT,2BAEV,gCACE,uCACA,8BACGT,EAAKU,KADR,aAEE,wBAAQC,QAAU,kBAAMH,KAAxB,wBAEDH,OAGL,8BACE,wBAAQM,QAAS,kBAAMR,GAAYD,IAAnC,SACGA,EAAU,OAAS,WAGxB,8BACe,IAAZA,EACCD,EAAMW,KAAI,SAACC,EAAMC,GAAP,OACR,cAACV,EAAD,CAEES,KAAMA,EACNP,WAAYA,EACZC,QAASA,GAHJO,MAKP,SCQGV,EApDF,SAAC,GAAmC,IAAjCS,EAAgC,EAAhCA,KAAMP,EAA0B,EAA1BA,WAAYC,EAAc,EAAdA,QAAc,EAChBQ,oBAAS,GADO,mBACvCC,EADuC,KAC9BC,EAD8B,KAGxCC,EAAc,CAAEC,QAASH,EAAU,GAAK,QACxCI,EAAc,CAAED,QAASH,EAAU,OAAS,IAU5CK,EAAO,SAACC,GACZhB,EAAWgB,IAOb,OACE,sBAAKC,MAjBW,CAChBC,WAAY,GACZC,YAAa,EACbC,OAAQ,QACRC,YAAa,EACbC,aAAc,GAYd,UACE,sBAAKL,MAAOH,EAAaS,UAAU,eAAnC,UACE,wCADF,IACkBhB,EAAKiB,MADvB,IAC8B,wCAD9B,IAC8CjB,EAAKkB,MACjD,uBACA,wBAAQT,GAAG,aAAaX,QAAS,kBAAMU,EAAKR,EAAKS,GAAIT,EAAKiB,MAAOjB,EAAKmB,OAAQnB,EAAKoB,QAASpB,EAAKkB,QAAjG,kBACA,uBACA,wBAAQpB,QAAS,kBAAMM,GAAYD,IAAnC,SACIA,EAAU,OAAS,YAGzB,sBAAKO,MAAOL,EAAaW,UAAU,YAAnC,UACE,wCADF,IACkBhB,EAAKiB,MACrB,uBACA,yCAHF,IAGmBjB,EAAKmB,OACtB,uBACA,0CALF,IAKoBnB,EAAKoB,QACvB,uBACA,wCAPF,IAOkBpB,EAAKkB,MACrB,wBAAQpB,QAAS,kBAAMU,EAAKR,EAAKS,GAAIT,EAAKiB,MAAOjB,EAAKmB,OAAQnB,EAAKoB,QAASpB,EAAKkB,QAAjF,kBACA,uBACA,wBAAQpB,QAAS,kBAAMM,GAAYD,IAAnC,SACIA,EAAU,OAAS,SAEvB,wBAAQL,QAAS,kBA5BJW,EA4BoBT,EAAKS,QA3B1Cf,EAAQe,GADQ,IAACA,GA4Bb,2BCjCOY,G,MAZM,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,OAAgB,OAAZA,EACK,KAIP,qBAAKN,UAAU,QAAf,SACGM,M,OC6CQC,EAnDG,SAAC,GAOZ,IANLC,EAMI,EANJA,SACAC,EAKI,EALJA,SACAC,EAII,EAJJA,qBACAC,EAGI,EAHJA,qBACAC,EAEI,EAFJA,YACAzC,EACI,EADJA,KAEI0C,EAAUC,cAEd,OACW,OAAT3C,EACE,gCACE,uCACA,uBAAM4C,SAAUH,EAAhB,UACE,2CAEE,uBACEnB,GAAG,WACHuB,MAAOR,EACPS,SAAUP,OAGd,2CAEE,uBACEjB,GAAG,WACHyB,KAAK,WACLF,MAAOP,EACPQ,SAAUN,OAGd,wBAAQlB,GAAG,eAAeyB,KAAK,SAA/B,sBAIF,wBAAQpC,QAAS,kBAAM+B,EAAQM,KAAK,MAApC,6BAGF,cAAC,IAAD,CAAUvC,GAAG,OC0BJwC,EAnEE,SAAC,GAAoB,IAAlBC,EAAiB,EAAjBA,WAAiB,EACHnC,mBAAS,IADN,mBAC5BoC,EAD4B,KAClBC,EADkB,OAEDrC,mBAAS,IAFR,mBAE5BsC,EAF4B,KAEjBC,EAFiB,OAGCvC,mBAAS,IAHV,mBAG5BwC,EAH4B,KAGhBC,EAHgB,KA+BnC,OACE,qBAAK3B,UAAU,UAAf,SACE,uBAAMe,SAhBM,SAACa,GACfA,EAAMC,iBACNR,EAAW,CACTpB,MAAOqB,EACPnB,OAAQqB,EACRpB,QAASsB,EACTxB,MAAO,IAGTqB,EAAY,IACZE,EAAa,IACbE,EAAc,KAKZ,UACE,yCAEE,uBACElC,GAAG,QACHyB,KAAK,OACLF,MAAOM,EACPL,SAnCU,SAAAW,GAClBL,EAAYK,EAAME,OAAOd,aAsCrB,0CAEE,uBACEE,KAAK,OACLF,MAAOQ,EACPP,SAxCW,SAAAW,GACnBH,EAAaG,EAAME,OAAOd,aA2CtB,2CAEE,uBACEE,KAAK,OACLF,MAAOU,EACPT,SA7CY,SAAAW,GACpBD,EAAcC,EAAME,OAAOd,aA+CvB,wBAAQE,KAAK,SAAb,uBCPOa,EArDM,SAAC,GASf,IARLlD,EAQI,EARJA,KACA2B,EAOI,EAPJA,SACAC,EAMI,EANJA,SACAuB,EAKI,EALJA,iBACAtB,EAII,EAJJA,qBACAC,EAGI,EAHJA,qBACAsB,EAEI,EAFJA,eACA9D,EACI,EADJA,KAEI0C,EAAUC,cAEd,OACW,OAAT3C,EACE,gCACE,yCACA,uBAAM4C,SAAUkB,EAAhB,UACE,uCAEE,uBACExC,GAAG,OACHuB,MAAOnC,EACPoC,SAAUe,OAGd,2CAEE,uBACEvC,GAAG,WACHuB,MAAOR,EACPS,SAAUP,OAGd,2CAEE,uBACEjB,GAAG,WACHyB,KAAK,WACLF,MAAOP,EACPQ,SAAUN,OAGd,wBAAQlB,GAAG,kBAAkByB,KAAK,SAAlC,yBAIF,wBAAQpC,QAAS,kBAAM+B,EAAQM,KAAK,MAApC,6BAGF,cAAC,IAAD,CAAUvC,GAAG,OChDbsD,EAAYC,IAAMC,YAAW,SAACC,EAAOC,GAAS,IAAD,EACnBpD,oBAAS,GADU,mBAC1CC,EAD0C,KACjCC,EADiC,KAG3CmD,EAAkB,CAAEjD,QAASH,EAAU,OAAS,IAChDqD,EAAkB,CAAElD,QAASH,EAAU,GAAK,QAE5CsD,EAAmB,WACvBrD,GAAYD,IASd,OANAuD,8BAAoBJ,GAAK,WACvB,MAAO,CACLG,uBAKF,gCACE,qBAAK/C,MAAO6C,EAAZ,SACE,wBAAQzD,QAAS2D,EAAjB,SAAoCJ,EAAMM,gBAE5C,sBAAKjD,MAAO8C,EAAiBxC,UAAU,YAAvC,UACGqC,EAAMO,SACP,wBAAQ9D,QAAS2D,EAAjB,6BAMRP,EAAUW,YAAc,YAKTX,Q,iBCrCTY,EAAU,aAEZC,EAAQ,KAMNC,EAAM,uCAAG,4BAAAC,EAAA,sEACUC,IAAMC,IAAIL,EAASC,GAD7B,cACPK,EADO,yBAENA,EAASC,MAFH,2CAAH,qDAKNC,EAAM,uCAAG,WAAO7D,GAAP,eAAAwD,EAAA,sEACUC,IAAMC,IAAN,UAAaL,EAAb,YAAwBrD,IADlC,cACP2D,EADO,yBAENA,EAASC,MAFH,2CAAH,sDA6BG,GAAEL,SAAQ3B,WAxBT,uCAAG,WAAMkC,GAAN,iBAAAN,EAAA,6DACXO,EAAS,CACbC,QAAS,CAAEC,cAAeX,IAFX,SAKMG,IAAMS,KAAKb,EAASS,EAAWC,GALrC,cAKXJ,EALW,yBAMVA,EAASC,MANC,2CAAH,sDAwBqBO,OAfzB,uCAAG,WAAOnE,EAAI8D,GAAX,iBAAAN,EAAA,6DACPY,EAAUX,IAAMY,IAAN,UAAchB,EAAd,YAA0BrD,GAAM8D,GADnC,SAEUM,EAFV,cAEPT,EAFO,yBAGNA,EAASC,MAHH,2CAAH,wDAeiCU,SAtC5B,SAAAC,GACfjB,EAAK,iBAAaiB,IAqCmCC,WATvC,uCAAG,WAAOxE,GAAP,mBAAAwD,EAAA,6DACXO,EAAS,CACbC,QAAS,CAAEC,cAAeX,IAEtBc,EAAUX,IAAMgB,OAAN,UAAiBpB,EAAjB,YAA6BrD,GAAM+D,GAJlC,SAKMK,EALN,cAKXT,EALW,yBAMVA,EAASC,MANC,2CAAH,sDASmDC,UCnCpD,GAAEa,MALN,uCAAG,WAAMC,GAAN,eAAAnB,EAAA,sEACWC,IAAMS,KAHf,aAG6BS,GAD/B,cACNhB,EADM,yBAELA,EAASC,MAFJ,2CAAH,uDCKI,GAAEgB,SALH,uCAAG,WAAMD,GAAN,eAAAnB,EAAA,sEACQC,IAAMS,KAHf,gBAG6BS,GAD5B,cACThB,EADS,yBAERA,EAASC,MAFD,2CAAH,uDCsKCiB,EA1JH,WAAO,IAAD,EACUpF,mBAAS,IADnB,mBACTd,EADS,KACFmG,EADE,OAEQrF,mBAAS,MAFjB,mBAETf,EAFS,KAEHqG,EAFG,OAGwBtF,mBAAS,MAHjC,mBAGTuF,EAHS,KAGKC,EAHL,OAIcxF,oBAAS,GAJvB,mBAITb,EAJS,KAIAC,EAJA,OAKQY,mBAAS,IALjB,mBAKTL,EALS,KAKH8F,EALG,OAMgBzF,mBAAS,IANzB,mBAMTsB,EANS,KAMCoE,EAND,OAOgB1F,mBAAS,IAPzB,mBAOTuB,EAPS,KAOCoE,EAPD,KASVC,EAAcC,mBAEpBC,qBAAU,WACRC,EACGjC,SACAkC,MAAK,SAAAC,GACJZ,EAASY,QAEZ,IAEHH,qBAAU,WACR,IAAMI,EAAiBC,OAAOC,aAAaC,QAAQ,qBACnD,GAAIH,EAAgB,CAClB,IAAMjH,EAAOqH,KAAKC,MAAML,GACxBZ,EAAQrG,GACR8G,EAAYlB,SAAS5F,EAAK4E,UAE3B,IAGH,IAAMnC,EAAW,uCAAG,WAAMgB,GAAN,eAAAqB,EAAA,6DAClBrB,EAAMC,iBADY,kBAGG6D,EAAavB,MAAM,CACpC3D,WAAUC,aAJI,OAGVtC,EAHU,OAOhBkH,OAAOC,aAAaK,QAClB,oBAAqBH,KAAKI,UAAUzH,IAGtC8G,EAAYlB,SAAS5F,EAAK4E,OAC1ByB,EAAQrG,GACRyG,EAAY,IACZC,EAAY,IAdI,kDAgBhBH,EAAgB,qBAChBmB,YAAW,WACTnB,EAAgB,QACf,KAnBa,0DAAH,sDAuBXzC,EAAc,uCAAG,WAAML,GAAN,SAAAqB,EAAA,6DACrBrB,EAAMC,iBADe,kBAGbiE,EAAgBzB,SAAS,CAC7B7D,WAAU3B,OAAM4B,aAJC,OAMnBG,EAAYgB,GANO,gDAQnB8C,EAAgB,oBAChBmB,YAAW,WACTnB,EAAgB,QACf,KAXgB,yDAAH,sDAgBdqB,EAAU,SAACC,GACflB,EAAYmB,QAAQxD,mBACpBwC,EACG5D,WAAW2E,GACXd,MAAK,SAAAgB,GACJ3B,EAASnG,EAAM+H,OAAOD,QAKtBzH,EAAU,uCAAG,WAAOgB,GAAP,mBAAAwD,EAAA,6DACXjE,EAAOZ,EAAMgI,MAAK,SAAApH,GAAI,OAAIA,EAAKS,KAAOA,KACtC4G,EAFW,2BAEKrH,GAFL,IAEWkB,MAAOlB,EAAKkB,MAAQ,IAF/B,SAGK+E,EAAYrB,OAAOnE,EAAI4G,GAH5B,OAGXC,EAHW,OAIjB/B,EAASnG,EAAMW,KAAI,SAAAC,GAAI,OAAIA,EAAKS,KAAOA,EAAKT,EAAOsH,MAJlC,2CAAH,sDAQV5H,EAAO,uCAAG,WAAOe,GAAP,SAAAwD,EAAA,sEACRgC,EAAYhB,WAAWxE,GADf,OAEd8E,EAASnG,EAAMmI,QAAO,SAAAvH,GAAI,OAAIA,EAAKS,KAAOA,MAF5B,2CAAH,sDAwBb,OACE,gCACE,cAAC,EAAD,CAAca,QAASmE,IACvB,eAAC,IAAD,WACE,cAAC,IAAD,CAAO+B,KAAK,SAAZ,SACE,cAAC,EAAD,CACEhG,SAAUA,EACVC,SAAUA,EACVC,qBAAsB,gBAAGoB,EAAH,EAAGA,OAAH,OAAgB8C,EAAY9C,EAAOd,QACzDL,qBAAsB,gBAAGmB,EAAH,EAAGA,OAAH,OAAgB+C,EAAY/C,EAAOd,QACzDJ,YAAaA,EACbzC,KAAMA,MAGV,cAAC,IAAD,CAAOqI,KAAK,YAAZ,SACE,cAAC,EAAD,CACE3H,KAAMA,EACN2B,SAAUA,EACVC,SAAUA,EACVuB,iBAAkB,gBAAGF,EAAH,EAAGA,OAAH,OAAgB6C,EAAQ7C,EAAOd,QACjDN,qBAAsB,gBAAGoB,EAAH,EAAGA,OAAH,OAAgB8C,EAAY9C,EAAOd,QACzDL,qBAAsB,gBAAGmB,EAAH,EAAGA,OAAH,OAAgB+C,EAAY/C,EAAOd,QACzDiB,eAAgBA,EAChB9D,KAAMA,MAGV,cAAC,IAAD,CAAOqI,KAAK,IAAZ,SACE,cAAC,EAAD,CACErI,KAAMA,EACNC,MAAOA,EACPC,QAASA,EACTC,WAAYA,EACZC,KAAMA,EACNC,SA9CO,kBACf,cAAC,EAAD,CAAWmE,YAAY,WAAWL,IAAKwC,EAAvC,SACE,cAAC,EAAD,CACEzD,WAAY0E,OA4CRtH,WAAYA,EACZC,QAASA,EACTC,OAzCK,WACb0G,OAAOC,aAAamB,WAAW,qBAC/BjC,EAAQ,kBCnHZkC,IAASC,OACP,cAAC,IAAD,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.795476f9.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst Home = ({\r\n  user,\r\n  blogs,\r\n  showAll,\r\n  setShowAll,\r\n  Blog,\r\n  blogForm,\r\n  updateBlog,\r\n  delBlog,\r\n  logOut\r\n}) => {\r\n\r\n  return (\r\n    <div>\r\n      {user === null ?\r\n        <div>\r\n          <h2>Blog app</h2>\r\n          <button><Link to=\"/login\">Login</Link></button>\r\n          <button><Link to=\"/register\">Register</Link></button>\r\n        </div> :\r\n        <div>\r\n          <h2>Blogs</h2>\r\n          <p>\r\n            {user.name} logged-in\r\n            <button onClick={(() => logOut())}>Log out</button>\r\n          </p>\r\n          {blogForm()}\r\n        </div>\r\n      }\r\n      <div>\r\n        <button onClick={() => setShowAll(!showAll)}>\r\n          {showAll ? 'hide' : 'show'}\r\n        </button>\r\n      </div>\r\n      <ul>\r\n        {showAll === true ?\r\n          blogs.map((blog, i) =>\r\n            <Blog\r\n              key={i}\r\n              blog={blog}\r\n              updateBlog={updateBlog}\r\n              delBlog={delBlog} />\r\n          )\r\n          : ''\r\n        }\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home","import React, { useState } from 'react'\r\n\r\nconst Blog = ({ blog, updateBlog, delBlog }) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const showDetails = { display: visible ? '' : 'none' }\r\n  const hideDetails = { display: visible ? 'none' : '' }\r\n\r\n  const blogStyle = {\r\n    paddingTop: 10,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5\r\n  }\r\n\r\n  const like = (id) => {\r\n    updateBlog(id)\r\n  }\r\n\r\n  const deletBlog = (id) => {\r\n    delBlog(id)\r\n  }\r\n\r\n  return (\r\n    <div style={blogStyle}>\r\n      <div style={hideDetails} className=\"blog-preview\">\r\n        <b>Title: </b> {blog.title} <b>Likes: </b> {blog.likes}\r\n        <hr></hr>\r\n        <button id=\"likeButton\" onClick={() => like(blog.id, blog.title, blog.author, blog.content, blog.likes)}>Like</button>\r\n        <br></br>\r\n        <button onClick={() => setVisible(!visible)}>\r\n          { visible ? 'Hide' : 'More' }\r\n        </button>\r\n      </div>\r\n      <div style={showDetails} className=\"blog-full\">\r\n        <b>Title: </b> {blog.title}\r\n        <br></br>\r\n        <b>Author: </b> {blog.author}\r\n        <br></br>\r\n        <b>Content: </b> {blog.content}\r\n        <br></br>\r\n        <b>Likes: </b> {blog.likes}\r\n        <button onClick={() => like(blog.id, blog.title, blog.author, blog.content, blog.likes)}>Like</button>\r\n        <br></br>\r\n        <button onClick={() => setVisible(!visible)}>\r\n          { visible ? 'Hide' : 'More' }\r\n        </button>\r\n        <button onClick={() => deletBlog(blog.id)}>Delete</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Blog","import '../App.css'\r\nimport React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Redirect, useHistory } from 'react-router-dom'\r\n\r\nconst LoginForm = ({\r\n  username,\r\n  password,\r\n  handleUsernameChange,\r\n  handlePasswordChange,\r\n  handleLogin,\r\n  user\r\n}) => {\r\n  let history = useHistory()\r\n\r\n  return (\r\n    user === null ?\r\n      <div>\r\n        <h2>Login</h2>\r\n        <form onSubmit={handleLogin}>\r\n          <div>\r\n          username\r\n            <input\r\n              id=\"username\"\r\n              value={username}\r\n              onChange={handleUsernameChange}\r\n            />\r\n          </div>\r\n          <div>\r\n          password\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={handlePasswordChange}\r\n            />\r\n          </div>\r\n          <button id=\"login-button\" type=\"submit\">\r\n          login\r\n          </button>\r\n        </form>\r\n        <button onClick={() => history.push('/')}>Back to home</button>\r\n      </div>\r\n      :\r\n      <Redirect to='/' />\r\n  )\r\n}\r\n\r\nLoginForm.propTypes = {\r\n  handleLogin: PropTypes.func.isRequired,\r\n  handleUsernameChange: PropTypes.func.isRequired,\r\n  handlePasswordChange: PropTypes.func.isRequired,\r\n  username: PropTypes.string.isRequired,\r\n  password: PropTypes.string.isRequired\r\n}\r\n\r\nexport default LoginForm","import React, { useState } from 'react'\r\n\r\nconst BlogForm = ({ createBlog }) => {\r\n  const [newTitle, setNewTitle] = useState('')\r\n  const [newAuthor, setNewAuthor] = useState('')\r\n  const [newContent, setNewContent] = useState('')\r\n\r\n  const handleTitle = event => {\r\n    setNewTitle(event.target.value)\r\n  }\r\n\r\n  const handleAuthor = event => {\r\n    setNewAuthor(event.target.value)\r\n  }\r\n\r\n  const handleContent = event => {\r\n    setNewContent(event.target.value)\r\n  }\r\n\r\n  const addBlog = (event) => {\r\n    event.preventDefault()\r\n    createBlog({\r\n      title: newTitle,\r\n      author: newAuthor,\r\n      content: newContent,\r\n      likes: 0\r\n    })\r\n\r\n    setNewTitle('')\r\n    setNewAuthor('')\r\n    setNewContent('')\r\n  }\r\n\r\n  return (\r\n    <div className=\"formDiv\">\r\n      <form onSubmit={addBlog}>\r\n        <div>\r\n            Title:\r\n          <input\r\n            id=\"title\"\r\n            type=\"text\"\r\n            value={newTitle}\r\n            onChange={handleTitle}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n            Author:\r\n          <input\r\n            type=\"text\"\r\n            value={newAuthor}\r\n            onChange={handleAuthor}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n            Content:\r\n          <input\r\n            type=\"text\"\r\n            value={newContent}\r\n            onChange={handleContent}\r\n          />\r\n        </div>\r\n        <button type=\"submit\">Add</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BlogForm","import React from 'react'\r\nimport { Redirect, useHistory } from 'react-router-dom'\r\n\r\nconst RegisterForm = ({\r\n  name,\r\n  username,\r\n  password,\r\n  handleNameChange,\r\n  handleUsernameChange,\r\n  handlePasswordChange,\r\n  handleRegister,\r\n  user\r\n}) => {\r\n  let history = useHistory()\r\n\r\n  return (\r\n    user === null ?\r\n      <div>\r\n        <h2>Sign Up</h2>\r\n        <form onSubmit={handleRegister}>\r\n          <div>\r\n          Name\r\n            <input\r\n              id=\"name\"\r\n              value={name}\r\n              onChange={handleNameChange}\r\n            />\r\n          </div>\r\n          <div>\r\n          username\r\n            <input\r\n              id=\"username\"\r\n              value={username}\r\n              onChange={handleUsernameChange}\r\n            />\r\n          </div>\r\n          <div>\r\n          password\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={handlePasswordChange}\r\n            />\r\n          </div>\r\n          <button id=\"register-button\" type=\"submit\">\r\n          Register\r\n          </button>\r\n        </form>\r\n        <button onClick={() => history.push('/')}>Back to home</button>\r\n      </div>\r\n      :\r\n      <Redirect to='/' />\r\n  )\r\n}\r\n\r\nexport default RegisterForm","/* eslint-disable linebreak-style */\r\nimport React, { useState, useImperativeHandle } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Togglable = React.forwardRef((props, ref) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible} className=\"blog-full\">\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nTogglable.displayName = 'Togglable'\r\nTogglable.propTypes = {\r\n  buttonLabel: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Togglable","import axios from 'axios'\r\nconst baseUrl = '/api/blogs'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = async () => {\r\n  const response = await axios.get(baseUrl, token)\r\n  return response.data\r\n}\r\n\r\nconst getOne = async (id) => {\r\n  const response = await axios.get(`${baseUrl}/${id}`)\r\n  return response.data\r\n}\r\n\r\nconst createBlog = async newObject => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n\r\n  const response = await axios.post(baseUrl, newObject, config)\r\n  return response.data\r\n}\r\n\r\nconst update = async (id, newObject) => {\r\n  const request = axios.put(`${ baseUrl }/${id}`, newObject)\r\n  const response = await request\r\n  return response.data\r\n}\r\n\r\nconst deleteBlog = async (id) => {\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n  const request = axios.delete(`${ baseUrl }/${id}`, config)\r\n  const response = await request\r\n  return response.data\r\n}\r\n\r\nexport default { getAll, createBlog, update, setToken, deleteBlog, getOne }","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { login }","import axios from 'axios'\r\nconst baseUrl = '/api/register'\r\n\r\nconst register = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { register }","/* eslint-disable linebreak-style */\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport Home from './components/Home'\r\nimport Blog from './components/Blog'\r\nimport Notification from './components/Notification'\r\nimport LoginForm from './components/LoginForm'\r\nimport BlogForm from './components/BlogForm'\r\nimport RegisterForm from './components/RegisterForm'\r\nimport Togglable from './components/Togglabe'\r\nimport blogService from './services/blogs'\r\nimport loginService from './services/login'\r\nimport registerService from './services/register'\r\nimport { Switch, Route } from 'react-router-dom'\r\nimport './App.css'\r\n\r\nconst App = () => {\r\n  const [blogs, setBlogs] = useState([])\r\n  const [user, setUser] = useState(null)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [showAll, setShowAll] = useState(true)\r\n  const [name, setName] = useState('')\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n\r\n  const blogFormRef = useRef()\r\n\r\n  useEffect(() => {\r\n    blogService\r\n      .getAll()\r\n      .then(initialBlogs => {\r\n        setBlogs(initialBlogs)\r\n      })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\r\n    if (loggedUserJSON) {\r\n      const user = JSON.parse(loggedUserJSON)\r\n      setUser(user)\r\n      blogService.setToken(user.token)\r\n    }\r\n  }, [])\r\n\r\n  // ----- Handlers ------\r\n  const handleLogin = async event => {\r\n    event.preventDefault()\r\n    try {\r\n      const user = await loginService.login({\r\n        username, password,\r\n      })\r\n\r\n      window.localStorage.setItem(\r\n        'loggedBlogappUser', JSON.stringify(user)\r\n      )\r\n\r\n      blogService.setToken(user.token)\r\n      setUser(user)\r\n      setUsername('')\r\n      setPassword('')\r\n    } catch (exception) {\r\n      setErrorMessage('Wrong credentials')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const handleRegister = async event => {\r\n    event.preventDefault()\r\n    try {\r\n      await registerService.register({\r\n        username, name, password,\r\n      })\r\n      handleLogin(event)\r\n    } catch (exception) {\r\n      setErrorMessage('An error ocurred')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  // ----- Add blog function ------\r\n  const addBlog = (blogObject) => {\r\n    blogFormRef.current.toggleVisibility()\r\n    blogService\r\n      .createBlog(blogObject)\r\n      .then(returnedBlog => {\r\n        setBlogs(blogs.concat(returnedBlog))\r\n      })\r\n  }\r\n\r\n  // ----- Update Blog -----\r\n  const updateBlog = async (id) => {\r\n    const blog = blogs.find(blog => blog.id === id)\r\n    const toUpdate = { ...blog, likes: blog.likes + 1 }\r\n    const updateo = await blogService.update(id, toUpdate)\r\n    setBlogs(blogs.map(blog => blog.id !== id ? blog : updateo))\r\n  }\r\n\r\n  // ----- Delete Blog -----\r\n  const delBlog = async (id) => {\r\n    await blogService.deleteBlog(id)\r\n    setBlogs(blogs.filter(blog => blog.id !== id))\r\n  }\r\n\r\n  // ----- Forms -------\r\n  /*const loginForm = () => (\r\n    <Togglable buttonLabel='login'>\r\n    </Togglable>\r\n  )\r\n*/\r\n  const blogForm = () => (\r\n    <Togglable buttonLabel='new blog' ref={blogFormRef}>\r\n      <BlogForm\r\n        createBlog={addBlog}\r\n      />\r\n    </Togglable>\r\n  )\r\n\r\n  const logOut = () => {\r\n    window.localStorage.removeItem('loggedBlogappUser')\r\n    setUser(null)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Notification message={errorMessage}/>\r\n      <Switch>\r\n        <Route path='/login'>\r\n          <LoginForm\r\n            username={username}\r\n            password={password}\r\n            handleUsernameChange={({ target }) => setUsername(target.value)}\r\n            handlePasswordChange={({ target }) => setPassword(target.value)}\r\n            handleLogin={handleLogin}\r\n            user={user}\r\n          />\r\n        </Route>\r\n        <Route path='/register'>\r\n          <RegisterForm\r\n            name={name}\r\n            username={username}\r\n            password={password}\r\n            handleNameChange={({ target }) => setName(target.value)}\r\n            handleUsernameChange={({ target }) => setUsername(target.value)}\r\n            handlePasswordChange={({ target }) => setPassword(target.value)}\r\n            handleRegister={handleRegister}\r\n            user={user}\r\n          />\r\n        </Route>\r\n        <Route path='/'>\r\n          <Home\r\n            user={user}\r\n            blogs={blogs}\r\n            showAll={showAll}\r\n            setShowAll={setShowAll}\r\n            Blog={Blog}\r\n            blogForm={blogForm}\r\n            updateBlog={updateBlog}\r\n            delBlog={delBlog}\r\n            logOut={logOut}\r\n          />\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","/* eslint-disable linebreak-style */\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\n\r\nReactDOM.render(\r\n  <Router>\r\n    <App />\r\n  </Router>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}