{"version":3,"sources":["services/blogs.js","components/Notification.js","services/login.js","components/LoginForm.js","components/Togglabe.js","components/BlogForm.js","components/Blog.js","App.js","index.js"],"names":["baseUrl","token","getAll","a","request","axios","get","response","data","createBlog","newObject","config","headers","Authorization","post","update","id","put","setToken","newToken","deleteBlog","delete","Notification","message","className","login","credentials","LoginForm","handleLogin","useState","username","setUsername","password","setPassword","logIn","event","preventDefault","loginService","user","window","localStorage","setItem","JSON","stringify","onSubmit","type","value","name","onChange","target","Togglable","React","forwardRef","props","ref","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","style","onClick","buttonLabel","children","BlogForm","blogs","newTitle","setNewTitle","newAuthor","setNewAuthor","newContent","setNewContent","title","author","content","likes","Blog","blog","updateBlog","delBlog","showDetails","hideDetails","paddingTop","paddingLeft","border","borderWidth","marginBottom","App","setBlogs","setUser","errorMessage","setErrorMessage","showAll","setShowAll","useEffect","blogService","getBlogs","loggedUserJSON","getItem","parse","exception","setTimeout","addBlog","blogObject","blogFormRef","current","returned","concat","find","toUpdate","updateo","map","blogToDelete","deleted","useRef","removeItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.36fb1858.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/blogs'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = async () => {\r\n  const request = axios.get(baseUrl)\r\n  const response = await request\r\n  return response.data\r\n}\r\n\r\nconst createBlog = async newObject => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n\r\n  const response = await axios.post(baseUrl, newObject, config)\r\n  return response.data\r\n}\r\n\r\nconst update = async (id, newObject) => {\r\n  const request = axios.put(`${ baseUrl }/${id}`, newObject)\r\n  const response = await request \r\n  return response.data\r\n}\r\n\r\nconst deleteBlog = async (id) => {\r\n  const config = {\r\n    headers: { Authorization: token }\r\n  }\r\n\r\n  const request = axios.delete(`${ baseUrl }/${id}`, config)\r\n  const response = await request\r\n  return response.data\r\n}\r\n\r\nexport default { getAll, createBlog, update, setToken, deleteBlog } ","import '../App.css'\r\nimport React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  } \r\n\r\n  export default Notification ","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data \r\n}\r\n\r\nexport default { login }","import React, { useState } from 'react'\r\nimport loginService from '../services/login'\r\n\r\nconst LoginForm = ({\r\n  handleLogin,\r\n}) => {\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  \r\n  const handleUsernameChange = (event) => {\r\n    setUsername(event.target.value)\r\n  }\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value)\r\n  }\r\n\r\n  const logIn = async (event) => {\r\n    event.preventDefault()\r\n    const user = await loginService.login({\r\n      username, password,\r\n    })\r\n\r\n    window.localStorage.setItem(\r\n      'loggedBlogappUser', JSON.stringify(user)\r\n    )\r\n\r\n    handleLogin(user)\r\n    setUsername('')\r\n    setPassword('')\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n\r\n      <form onSubmit={logIn}>\r\n          <div>\r\n            username\r\n              <input\r\n              type=\"text\"\r\n              value={username}\r\n              name=\"Username\"\r\n              onChange={handleUsernameChange}\r\n              />\r\n          </div>\r\n          <div>\r\n            password\r\n              <input\r\n              type=\"password\"\r\n              value={password}\r\n              name=\"Password\"\r\n              onChange={handlePasswordChange}\r\n              />\r\n          </div>\r\n          <button type=\"submit\">login</button>\r\n        </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginForm","import React, { useState, useImperativeHandle } from 'react'\r\n\r\nconst Togglable = React.forwardRef((props, ref) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n  \r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Togglable","import React, { useState } from 'react'\r\n\r\nconst BlogForm = ({ createBlog, blogs }) => {\r\n  const [newTitle, setNewTitle] = useState('')\r\n  const [newAuthor, setNewAuthor] = useState('')\r\n  const [newContent, setNewContent] = useState('')\r\n\r\n  const handleTitle = (event) => {\r\n    setNewTitle(event.target.value)\r\n  }\r\n\r\n  const handleAuthor = (event) => {\r\n    setNewAuthor(event.target.value)\r\n  }\r\n\r\n  const handleContent = (event) => {\r\n    setNewContent(event.target.value)\r\n  }\r\n\r\n  const addBlog = (event) => {\r\n    event.preventDefault()\r\n    createBlog({\r\n      title: newTitle,\r\n      author: newAuthor,\r\n      content: newContent,\r\n      likes: 0\r\n    })\r\n    \r\n    setNewTitle('')\r\n    setNewAuthor('')\r\n    setNewContent('')\r\n  }\r\n\r\n  return (\r\n  <form onSubmit={addBlog}>\r\n      <div>\r\n        <div>\r\n          Title:  \r\n            <input\r\n            type=\"text\"\r\n            value={newTitle}\r\n            onChange={handleTitle}\r\n            />\r\n        </div>\r\n          \r\n        <div>\r\n          Author:\r\n            <input\r\n            type=\"text\"\r\n            value={newAuthor}\r\n            onChange={handleAuthor}\r\n            />\r\n        </div>\r\n          \r\n        <div>\r\n          Content:\r\n            <input\r\n            type=\"text\"\r\n            value={newContent}\r\n            onChange={handleContent}\r\n            />\r\n        </div>\r\n        <button type=\"submit\">Add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default BlogForm","import React, { useState } from 'react'\r\n\r\nconst Blog = ({ blog, updateBlog, delBlog }) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const showDetails = { display: visible ? '' : 'none' }\r\n  const hideDetails = { display: visible ? 'none' : '' } \r\n\r\n  const blogStyle = {\r\n    paddingTop: 10,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5\r\n  }\r\n  \r\n  const like = (id) => {\r\n    updateBlog(id)\r\n  }\r\n\r\n  const deletBlog = (id) => {\r\n    delBlog(id)\r\n  }\r\n\r\n  return (\r\n    <div style={blogStyle}>\r\n      <div style={hideDetails}> \r\n        <b>Title: </b> {blog.title} <b>Likes: </b> {blog.likes} \r\n        <hr></hr>\r\n      </div>\r\n      <div style={showDetails}>\r\n        <b>Title: </b> {blog.title}\r\n        <br></br> \r\n        <b>Author: </b> {blog.author}\r\n        <br></br>\r\n        <b>Content: </b> {blog.content}\r\n        <br></br>\r\n        <b>Likes: </b> {blog.likes}\r\n        <button onClick={() => like(blog.id, blog.title, blog.author, blog.content, blog.likes)}>Like</button>\r\n        <br></br>\r\n      </div>\r\n      <button onClick={() => setVisible(!visible)}>\r\n        { visible ? 'Hide' : 'More' }\r\n      </button>\r\n      <button onClick={() => deletBlog(blog.id)}>Delete</button>   \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Blog","import React, { useState, useEffect, useRef } from 'react'\nimport blogService from './services/blogs' \nimport Notification from './components/Notification'\nimport LoginForm from './components/LoginForm'\nimport Togglable from './components/Togglabe'\nimport BlogForm from './components/BlogForm'\nimport './App.css'\nimport Blog from './components/Blog'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [user, setUser] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [showAll, setShowAll] = useState(false)\n\n  useEffect(() => {\n    const getBlogs = async () => {\n      const blogs = await blogService.getAll()\n      setBlogs(blogs)\n      }\n    getBlogs()\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n    }\n  }, [])\n\n  // ----- Handlers ------ \n  const handleLogin = (user) => {\n    try {\n      blogService.setToken(user.token)\n      setUser(user)\n    } catch (exception) {\n      setErrorMessage('Wrong credentials')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  // ----- Add blog function ------\n  const addBlog = async (blogObject) => {\n    blogFormRef.current.toggleVisibility()\n    const blog = blogService.createBlog(blogObject)\n    const returned = await blog\n    setBlogs(blogs.concat(returned))\n  }\n\n  // ----- Update Blog -----\n  const updateBlog = async (id) => {\n    const blog = blogs.find(blog => blog.id === id)\n    const toUpdate = { ...blog, likes: blog.likes + 1 }\n    const updateo = blogService.update(id, toUpdate)\n    const returned = await updateo\n    setBlogs(blogs.map(blog => blog.id !== id ? toUpdate : returned))\n  }\n\n  // ----- Delete Blog -----\n  const delBlog = async (id) => {\n    const blogToDelete = blogService.deleteBlog(id)\n    const deleted = await blogToDelete \n    return deleted\n  }\n\n  // ----- Forms -------\n  const loginForm = () => (\n    <Togglable buttonLabel=\"login\">\n      <LoginForm \n        handleLogin ={handleLogin}\n        />\n    </Togglable>\n  )\n\n  const blogFormRef = useRef()\n\n  const blogForm = () => (\n    <Togglable buttonLabel=\"new note\" ref={blogFormRef}>\n      <BlogForm\n        createBlog={addBlog}\n      />   \n    </Togglable>\n  )\n\n  const logOut = () => {\n    window.localStorage.removeItem('loggedBlogappUser')\n  }\n\n  return (\n    <div className=\"App\">\n      <h2>Blogs</h2>\n\n      <Notification message={errorMessage}/>\n\n      {user === null ? \n        loginForm() :\n        <div>\n          <p>\n            {user.name} logged-in\n            <button onClick={(() => logOut())}>Log out</button>\n          </p>\n          {blogForm()}\n        </div> \n      }\n    \n      <div>\n        <button onClick={() => setShowAll(!showAll)}>\n          {showAll ? 'hide' : 'show'}\n        </button> \n      </div>\n      \n      {showAll === true ? \n        blogs.map(blog => \n          <Blog blog={blog} updateBlog={updateBlog} delBlog={delBlog} ></Blog>\n        ) \n        : null\n      }\n    </div>\n  );\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}